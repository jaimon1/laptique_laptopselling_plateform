<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Forgot Password</title>
    <link rel="stylesheet" href="/css/forgotPassword.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="page-container">
        <div class="logo">LAPTIQUE</div>
        
        <div class="left-section">
            <div class="left-content">
                <h2>Forgot Your Password?</h2>
                <p>No worries! We'll help you reset it and get you back to shopping in no time.</p>
            </div>
        </div>

        <div class="right-section">
            <div class="form-card">
            <h1>Forgot Password ?</h1>
            <p class="subtitle">Enter your email to reset password</p>
            
            <% if (typeof msg !== 'undefined' && msg) { %>
            <div class="alert alert-danger">
                <%= msg %>
            </div>
            <% } %>

            <% if (typeof success !== 'undefined' && success) { %>
            <div class="alert alert-success">
                <%= success %>
            </div>
            <% } %>

            <form action="/forgot-password" method="post" id="forgotPasswordForm">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" name="email" class="form-control" id="email" placeholder="Email" required>
                    <div id="errorEmail" class="error-message"></div>
                </div>
                <button type="submit" class="btn-primary" id="submitBtn">Send OTP</button>
            </form>

            <div class="back-link">
                <a href="/login">Back to Login</a>
            </div>
            </div>
        </div>
    </div>

    <script>
        const emailInput = document.getElementById('email');
        const errorEmail = document.getElementById('errorEmail');
        const forgotPasswordForm = document.getElementById('forgotPasswordForm');
        const submitBtn = document.getElementById('submitBtn');

        function emailValidation() {
            const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            if (!emailPattern.test(emailInput.value.trim())) {
                errorEmail.style.display = "block";
                errorEmail.innerHTML = "Please enter a valid email address";
                return false;
            } else {
                errorEmail.style.display = "none";
                errorEmail.innerHTML = "";
                return true;
            }
        }

        document.addEventListener("DOMContentLoaded", function () {
            forgotPasswordForm.addEventListener('submit', (e) => {
                if (!emailValidation()) {
                    e.preventDefault();
                } else {
                    // Show loading state
                    submitBtn.innerHTML = 'Sending OTP...';
                    submitBtn.disabled = true;
                }
            });

            emailInput.addEventListener('blur', emailValidation);
            emailInput.addEventListener('input', () => {
                if (errorEmail.innerHTML) {
                    emailValidation();
                }
            });
        });
    </script>
</body>

</html>